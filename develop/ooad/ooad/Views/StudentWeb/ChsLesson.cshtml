
@{
	ViewBag.Title = "ChsLesson";
	Layout = "~/Views/Shared/StudentLayout/_StudentLayout2.cshtml";
}

<!-- content hearder-->
<div class="container" style=" width:90%; margin:20px; border-radius:3px 3px; border:inset;border-width:1px; border-color:#f7f7f7;">
	<h2 style="color:#5ab4ac">讨论课</h2>
</div>

<!-- content body -->
<div class="input-group" style="margin:20px;">
	<span class="input-group-addon">课程</span>
    <select id="course_id" name="course_id" class="form-control" onChange="f(this.options[this.selectedIndex].value)">
        @foreach (var co in ViewBag.colist)
        {
            <option value="@co.id">@co.course_name</option>
        }
        <option value="-1" disabled selected="selected">-- 请选择 --</option>
    </select>
</div>
<div class="input-group" style="margin:20px;">
	<span class="input-group-addon">轮次</span>
    <select id="round_id" name="round_id" class="form-control">
        <option value="-1" disabled selected="selected">-- 请选择 --</option>
    </select>
</div>
<hr />
<!--这里要改 咋传数据咋改-->
<div style="margin:20px;">
	<h3 style="color:#5ab4ac">第 @ViewBag.obMsg.count 次讨论课</h3>
	<h4>@ViewBag.obMsg.msg</h4>
	<button onclick="enter(1)" type="button" class="btn btn-primary btn-lg" style="margin:0 auto; background-color:#e1e1e1;color:#5ab4ac;border:hidden">
		进入
	</button>
	<hr />
</div>

<script language="javascript" type="text/javascript">
		//跳转并传递这是第几次讨论课
		function enter(n) {
			window.location.href = "SpecificSeminar?round="+@ViewBag.obMsg.round+"&count=" + n;
    }
    function f(pos) {
        $.ajax({
            'url': "/TeacherWeb/RRoundInfo",
            'type': "post",
            'data': { data: pos },
            'success': function (result) {
                var obj = document.getElementById("round_id");
                obj.options.length = 0;
                var list = result.split("|");
                for (var i = 0; i < list.length; i+=2) {
                    obj.options.add(new Option(list[i], list[i + 1]));
                }
            },
            'error': function () {
                alert("发送失败！")
            }
        })
    }
</script>
@{
    Layout = "~/Views/Shared/SMobileLayout/_SMobileLayout4.cshtml";
}

<!--班级信息-->
<form class="bs-example bs-example-form" method="post" onsubmit="validateCreate()" action="/StudentMobile/_createteam">
    <div class="container" style="width:100%">
        <div class="input-group" style="background-color:#ffffff;margin:1px;width:100%">
            <span class="input-group-addon">小组名</span>
            <input type="text" id="groupName" name="groupName" class="form-control">
        </div>
    </div>
    <div class="container" style="width:100%">
        <div class="container" style="background-color:#ffffff;margin:1px;width:100%">
            <p style="font-weight:bold;height:40px;line-height:40px;display:inline;margin-right:2em">选择班级:</p>
            <select style="width:auto;" name="klass_id" id="klass_id">
                @for (int i = 0; i < ViewBag.klass_serial.Length; i++)
                {
                    <option value="@ViewBag.klass_id[i]">@ViewBag.klass_serial[i]</option>
                }
            </select>
        </div>
    </div>
    <div class="container" style="width:100%">
        <div class="container" style="background-color:#ffffff;margin:1px;width:100%">
            <p style="font-weight:bold;height:40px;line-height:40px;display:inline;margin-right:2em">添加成员:</p><br />
        </div>
    </div>
    <div class="container" style="width:100%;height: 190px; overflow:scroll">
        <div class="container" style="background-color:#ffffff;margin:1px;width:100%">
            <table style="width:100%" id="table">
                @for (int i = 0; i < ViewBag.stulist.cnt; i++)
                {
                    <tr>
                        <td style="width:20%;" align="center"><input type="radio" value="@ViewBag.stulist.student_id[i]" /></td>
                        <td style="width:50%;" align="center"><p>@ViewBag.stulist.account[i]</p></td>
                        <td style="width:30%;" align="center"><p>@ViewBag.stulist.name[i]</p></td>
                    </tr>
                }
            </table>
        </div>
    </div>
    <div class="container" style="width:100%">
        <div class="container" style="background-color:#ffffff;margin:1px;width:100%">
            <p style="font-weight:bold;height:40px;line-height:40px;display:inline;margin-right:2em">搜索成员:</p>
            <input type="text" name="sear" id="sear" style="width:50%;" onchange="searchStudent();"/>
        </div>
    </div>
    <div class="input-group input-group input-group-lg" style="margin: 10px auto">
        <input type="submit" class="btn btn-primary btn-lg" value="确认提交" style="background-color:#1fa5e5;width:185px;">
    </div>
</form>
<script>
    function searchStudent()
    {
        var sid = document.getElementById("sear").value;
        if (sid != "") {
            $.ajax({
                'url': "/StudentMobile/search",
                'type': "post",
                'data': { sid: sid, cid:'@ViewBag.course_id'},
                success: function (mes)
                {
                    var jobj = eval("(" + mes + ")");
                    var table = document.getElementById("table");

                    for (var i = 0; i < jobj.cnt;i++) {
                        var row = table.insertRow(0);
                        var cell = row.insertCell(0);
                        cell.innerHTML = "<td style='width:20%;' align='center'><p>" + jobj.name[i] + "</p></td>";
                        cell = row.insertCell(0);
                        cell.innerHTML = "<td style='width:50%;' align='center'><p>"+jobj.account[i]+"</p></td>";
                        cell = row.insertCell(0);
                        cell.innerHTML = "<td style='width: 20 %;' align='center'><input type='radio' value=" + jobj.student_id[i] +" /></td>";
                    }
                },
                error: function () { alert('error');}
            })
        }
    }
    function validateCreate() {
        if (document.getElementById("groupName") == "") {
            alert("请输入小组名");
            return false;
        }
    }
</script>